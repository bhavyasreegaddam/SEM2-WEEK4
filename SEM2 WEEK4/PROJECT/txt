-- TABLE TO STORE BOOK INFORMATION 
CREATE TABLE BOOKS( BOOKID INT, TITLE VARCHAR(30),GENRE VARCHAR(30),PUBLICATION_YEAR INT,AUTHORID INT,AUTHORNAME VARCHAR(30),STATUS VARCHAR(30));

-- TABLE TO STORE AUTHOR DETAILS
CREATE TABLE AUTHORS(AUTHORID INT,NAME VARCHAR(30),BIRTH_YEAR INT);

-- TABLE TO STORE MEMBERS DETAILS
CREATE TABLE MEMBERS(MEMBERID INT,NAME VARCHAR(30),JOIN_DATE DATE,LAST_BORROWED_DATE DATE);

-- TABLE TO STORE LOAN DETAILS
CREATE TABLE LOANS(LOANID INT,BOOKID INT,MEMBERID INT,LOAN_DATE DATE,RETURN_DATE DATE);

-- INSERTING DATA INTO BOOKS 
INSERT INTO BOOKS(BOOKID,TITLE,GENRE,PUBLICATION_YEAR,AUTHORID,AUTHORNAME,STATUS) VALUES(1,'HARRY POTTER','FANTASY',1996,101,'RAM','AVAILABLE');
INSERT INTO BOOKS(BOOKID,TITLE,GENRE,PUBLICATION_YEAR,AUTHORID,AUTHORNAME,STATUS) VALUES(2,'ALLADIIN','FANTASY',2000,102,'JANU','AVAILABLE');
INSERT INTO BOOKS(BOOKID,TITLE,GENRE,PUBLICATION_YEAR,AUTHORID,AUTHORNAME,STATUS) VALUES(3,'SPIDERMAN','THEISES',2017,103,'ROWLING','AVAILABLE');
INSERT INTO BOOKS(BOOKID,TITLE,GENRE,PUBLICATION_YEAR,AUTHORID,AUTHORNAME,STATUS) VALUES(4,'SHINCHAN','THEISES',2020,104,'GEORGE','AVAILABLE');

-- INSERTING DATA INTO AUTHORS 
INSERT INTO AUTHORS(AUTHORID,NAME,BIRTH_YEAR) VALUES(101,'RAM',1990);
INSERT INTO AUTHORS(AUTHORID,NAME,BIRTH_YEAR) VALUES(102,'JANU',1903);
INSERT INTO AUTHORS(AUTHORID,NAME,BIRTH_YEAR) VALUES(103,'ROWLING',1893);
INSERT INTO AUTHORS(AUTHORID,NAME,BIRTH_YEAR) VALUES(104,'GEORGE',2000);

-- INSERTING DATA INTO MEMBERS
INSERT INTO MEMBERS(MEMBERID,NAME,JOIN_DATE,LAST_BORROWED_DATE) VALUES(1,'ALICE','2022-01-15', '2023-05-20');
INSERT INTO MEMBERS(MEMBERID,NAME,JOIN_DATE,LAST_BORROWED_DATE) VALUES(2,'JOHN','2022-01-15', '2023-04-21');
INSERT INTO MEMBERS(MEMBERID,NAME,JOIN_DATE,LAST_BORROWED_DATE) VALUES(3,'JACK','2022-01-15', '2023-06-10');
INSERT INTO MEMBERS(MEMBERID,NAME,JOIN_DATE,LAST_BORROWED_DATE) VALUES(4,'RAJAN','2022-01-15', 'NULL');

-- SELECTING SPECIFIC BOOKS WRITTEN BY A AUTHOR
SELECT*FROM BOOKS WHERE AUTHORNAME='RAM';
SELECT*FROM BOOKS WHERE AUTHORNAME='GEORGE';

-- UPDATE BOOK'S STATUS WHEN IT IS BORROWED
UPDATE BOOKS SET STATUS = 'BORROWED' WHERE BOOKID=1;

--DELETE A MEMBER WHO HAS NOT BORROWED ANY BOOKS IN THE LAST YEAR
DELETE FROM MEMBERS WHERE LAST_BORROWED_DATE='NULL';

-- WHERE CLAUSE TO FILTER BOOKS
SELECT*FORM BOOKS WHERE STATUS='AVAILABLE';

-- AND/OR TO FILTER BOOKS BY GENRE AND PUBLICATION YEAR
SELECT*FROM BOOKS WHERE GENRE='FANTASY' AND PUBLICATION_YEAR>1950;
SELECT*FROM BOOKS WHERE GENRE='THEISES' AND PUBLICATION_YEAR<2000;

-- SORT BOOKS BY TITLE OR AUTHOR NAME
SELECT*FROM BOOKS ORDER BY TITLE;
SELECT*FROM BOOKS ORDER BY AUTHORNAME;

-- COUNT THE TOTAL NUMBER OF BOOKS IN THE LIBRARY
SELECT COUNT(BOOKS) FROM BOOKS;

--GROUP AND COUNT BOOKS BY GENRE
SELECT GENRE,COUNT(*) AS TOTAL_BOOKS FROM BOOKS GROUP BY GENRE;





